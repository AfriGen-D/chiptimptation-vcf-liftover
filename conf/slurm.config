/*
========================================================================================
    SLURM Configuration
========================================================================================
    SLURM cluster-specific settings for the chiptimptation-vcf-liftover pipeline
========================================================================================
*/

process {
    executor = 'slurm'
    queue = 'main'
    clusterOptions = '--mail-user=mamana.mbiyavanga@uct.ac.za --mail-type=END,FAIL'
    
    // Process-specific SLURM settings
    withLabel: 'crossmap' {
        queue = 'main'
        cpus = 2
        memory = '8 GB'
        time = '4h'
        clusterOptions = '--partition=main --qos=normal'
    }
    
    withLabel: 'vcf_processing' {
        queue = 'main'
        cpus = 4
        memory = '16 GB'
        time = '2h'
        clusterOptions = '--partition=main --qos=normal'
    }
    
    withLabel: 'imputation' {
        queue = 'main'
        cpus = 2
        memory = '12 GB'
        time = '3h'
        clusterOptions = '--partition=main --qos=normal'
    }
    
    withLabel: 'general' {
        queue = 'main'
        cpus = 1
        memory = '4 GB'
        time = '1h'
        clusterOptions = '--partition=main --qos=normal'
    }
    
    withLabel: 'large_mem' {
        queue = 'highmem'
        cpus = 8
        memory = '64 GB'
        time = '8h'
        clusterOptions = '--partition=highmem --qos=normal'
    }
    
    // Specific process configurations
    withName: 'CROSSMAP_VCF' {
        queue = 'main'
        cpus = 2
        memory = '8 GB'
        time = '4h'
    }
    
    withName: 'SORT_VCF' {
        queue = 'main'
        cpus = 4
        memory = '16 GB'
        time = '2h'
    }
    
    withName: 'RENAME_CHROMOSOMES' {
        queue = 'main'
        cpus = 2
        memory = '8 GB'
        time = '1h'
    }
    
    withName: 'FIX_CONTIG_HEADER' {
        queue = 'main'
        cpus = 2
        memory = '8 GB'
        time = '1h'
    }
    
    withName: 'INDEX_VCF' {
        queue = 'main'
        cpus = 1
        memory = '4 GB'
        time = '30min'
    }
    
    withName: 'VALIDATE_VCF' {
        queue = 'main'
        cpus = 1
        memory = '4 GB'
        time = '30min'
    }
    
    withName: 'LIFTOVER_STATS' {
        queue = 'main'
        cpus = 1
        memory = '4 GB'
        time = '30min'
    }
}

executor {
    queueSize = 50
    submitRateLimit = '10 sec'
    pollInterval = '30 sec'
}

// SLURM-specific environment variables
env {
    SLURM_ACCOUNT = 'your_account'  // Update with your SLURM account
    SLURM_PARTITION = 'main'
}
